
<app-header title="Momentz-4-ever" 
            [isUserLoggedIn]="true"></app-header>


<div class="jumbotron">
  <div class="row">
    <div style="width:40%" class="text-center">
        <h1>Hello User, your Albums: </h1>
        <!-- added by Saurabh for testing, delete later. Start -->
        <!-- <div>
            <h1>adding cover image</h1>
            <button type="button" (click)="getAlbumsById()">GetCoverImage</button>
            <img src="http://localhost:1337/api/v1/albums/59b09eb112b5522e08372ac4" id='albumCoverImg'>
            
        </div> -->
        <!-- added by Saurabh for testing, delete later. end -->
    </div>
    <div style="width:60%">
        <span style="float:right">
            <button type="button" class="btn btn-primary btn-lg" style="margin: 5px; padding: 10px;"
                 data-toggle="modal" data-target="#newAlbumWindow">
                <span class="glyphicon glyphicon-plus" aria-hidden="true">CreateAlbum</span>
            </button>
            <button type="button" (click)="setView('listView')" id="listView" class="btn btn-primary btn-lg"
                style="margin: 5px; padding: 15px;">
                <span class="glyphicon glyphicon-list" data-toggle="tooltip" title="List View" aria-hidden="true"></span>
            </button>
            <button (click)="setView('gridView')" class="btn btn-primary btn-lg" id="gridView" 
                style="margin: 5px; padding: 15px;">
                <span class="glyphicon glyphicon-th" data-toggle="tooltip" title="Grid View" aria-hidden="true"></span>
            </button>
        </span>
    </div>
  </div>
</div>

<div class="container" *ngIf="currentView=='listView'">
        <table class="table table-hover">
            <thead>
                <tr class="thead-inverse">
                    <th>Title</th>
                    <th>Description</th>
                    <th>Date of Creation</th>
                    <th>Last Viewed</th>
                </tr>
            </thead>
        <tbody>
            <tr *ngFor = "let album of albums">
                <td><img src="http://localhost:1337/api/v1/albums/{{album._id}}" style="padding:10px;margin:0 auto;width:52px;height:52px;">
                  <b>{{album.title}}</b></td>
                <td>{{album.description}}</td>
                <td>{{album.createdOn}}</td>
                <td>{{album.lastViewedOn}}</td>
            </tr>
        </tbody>
        </table>
</div>

<div *ngIf="currentView=='gridView'">
    <div class="container">
        <div class="row">
            <div class="col-md-3 col-sm-6" *ngFor="let album of albums">
                <div class="card card-outline-primary">
                    <img class="card-img-top" style="border-bottom:1px solid;padding: 10px;margin:0 auto;width:100%;height:200px;" 
                        src="http://localhost:1337/api/v1/albums/{{album._id}}"  alt="Album">
                    <div class="card-block text-center">
                        <h4 class="card-title">{{album.title}}</h4>
                        <p class="card-text">{{album.description}}</p>
                        <p class="card-text"><small class="text-muted">Created On: {{album.createdOn}}</small></p>
                        <button (click)="onViewClick(album)" class="btn btn-primary">View</button>
                    </div>
                    <div class="card-footer">
                        <small class="text-muted">Last Viewed On: {{album.lastViewedOn}} </small> 
                    </div>
                </div>
            </div>
        <div>
    </div>
</div>

<!-- <div id="spinner" class="spinner">
    <img src="assets/spinner1.gif">
</div> -->

<div class="modal fade" id="newAlbumWindow" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header" style="padding:35px 50px;background-color: #5cb85c;">
                <h2 class="modal-title">New Album</h2>
                <button type="button" #fileInput  id='closeModal' class="close" data-dismiss="modal">&times;</button>
            </div>
            <form>
                <div class="modal-body" style="padding:40px 50px;">
                        <div>
                            <label> Album Name</label>
                            <input type="text" class="form-control" id="title" name="title" placeholder="Enter Album name">
                        </div>
                        <div>
                            <label> Description</label>
                            <input type="text" class="form-control" id="description" name="description" placeholder="Add Description">
                        </div>
                </div>
                <div class="modal-footer">
                            <input type="file" id="selectFile" name="selectFile" class="btn btn-success"  multiple />
                            <button type="button" (click)="uploadImage()">Upload</button>
                </div>
            </form>
        </div>
    </div>
</div>
